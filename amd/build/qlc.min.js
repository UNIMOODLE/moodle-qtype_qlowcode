define("qtype_qlowcode/qlc",["exports","core/str","core/url","core/ajax"],(function(_exports,_str,_url,_ajax){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}
/**
   * Module javascript to place new conditions.
   *
   * @module    qlc
   * @category  Classes - autoloading
   * @copyright 2023, ISYC
   * @license   http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
   */Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=void 0,_url=_interopRequireDefault(_url),_ajax=_interopRequireDefault(_ajax);_exports.init=()=>{selectConfigUrlEvent(),selectWorkspaceEvent(),selectApplicationEvent()};const selectConfigUrlEvent=()=>{document.querySelector('[id*="id_configurl"]').addEventListener("change",(e=>{selectConfigUrlAjax(e.target.value)}))},selectConfigUrlAjax=id=>{const targetId="id_applicationid";_ajax.default.call([{methodname:"qtype_qlowcode_get_applications",args:{id:id}}])[0].done((function(data){clearSelect(targetId);const selectTarget=document.getElementById(targetId);for(var i=0;i<data.length;i++){let option=document.createElement("option");option.text=data[i].name,option.value=data[i].id,selectTarget.add(option),0==i&&selectWorkspaceAjax(data[i].id)}})).fail((function(err){clearSelect(targetId),clearSelect("id_pageurl"),console.log(err)}))},selectWorkspaceEvent=()=>{document.querySelector('[id*="id_workspaceid"]').addEventListener("change",(e=>{selectWorkspaceAjax(e.target.value)}))},selectWorkspaceAjax=workspaceId=>{const configurl=document.getElementById("id_configurl"),targetId="id_applicationid";_ajax.default.call([{methodname:"qtype_qlowcode_get_applications",args:{id:configurl.value,workspaceId:workspaceId}}])[0].done((function(data){clearSelect(targetId);const selectTarget=document.getElementById(targetId);for(var i=0;i<data.length;i++){let option=document.createElement("option");option.text=data[i].name,option.value=data[i].id,selectTarget.add(option)}selectApplicationAjax(null)})).fail((function(err){clearSelect(targetId),clearSelect("id_pageurl"),console.log(err)}))},selectApplicationEvent=()=>{document.querySelector('[id*="id_applicationid"]').addEventListener("change",(e=>{console.log("addEventListener",e.target.value),selectApplicationAjax(e.target.value)}))},selectApplicationAjax=applicationId=>{const configurl=document.getElementById("id_configurl");_ajax.default.call([{methodname:"qtype_qlowcode_get_pages",args:{id:configurl.value,applicationId:applicationId}}])[0].done((function(data){clearSelect("id_pageurl");const selectTarget=document.getElementById("id_pageurl");for(var i=0;i<data.length;i++){let option=document.createElement("option");option.text=data[i].name,option.value=data[i].id,selectTarget.add(option)}})).fail((function(err){clearSelect("id_pageurl"),console.log(err)}))},clearSelect=id=>{document.getElementById(id).innerHTML=""}}));

//# sourceMappingURL=qlc.min.js.map